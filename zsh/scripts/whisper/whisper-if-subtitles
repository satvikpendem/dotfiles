subtitles=false
filename=""
# filename_parts=()

while [[ $# -gt 0 ]]; do
    key="$1"
    case $key in
    -f | --file)
        filename="$2"
        shift
        shift
        ;;
        # shift
        # # Capture all arguments after -f as parts of the filename
        # # until we encounter another argument starting with a dash
        # while [[ $# -gt 0 && $1 != -* ]]; do
        #     filename_parts+=("$1")
        #     shift
        # done
        # ;;
    -s | --subtitles)
        subtitles="$2"
        if [[ "$subtitles" != "true" ]]; then
            echo "Invalid value for --subtitles. Expected 'true', got: $subtitles\nIf $(subtitles) is not provided, this script will not run Whisper and will exit.\nIf you would like to run Whisper, provide the $(subtitles) argument with the value 'true' or use the standalone $(whisperv) script."
            exit 1
        fi
        shift
        shift
        ;;
    *)
        echo "Unknown argument: $key"
        exit 1
        ;;
    esac
done

if [ "$subtitles" = "true" ]; then
    # filename="${filename_parts[*]}"
    whisperv -f $filename
fi
